<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <label for="u">University: </label>
    <input type="text" id="u"><br><br>
    <label for="i">Institute: </label>
    <input type="text" id="i"><br><br>
    <label for="group">Branch: </label>
    <select name="" id="group">
        <option value="">--SelectGroup--</option>
        <option value="Cse">Cse</option>
        <option value="Ece">Ece</option>
        <option value="Eee">Eee</option>
        <option value="Civil">Civil</option>
        <option value="Mech">Mech</option>
    </select><br><br>
    <label for="select">Degree:</label>
    <select name="" id="select">
        <option value="">--SelectGroup--</option>
        <option value="B.Com">B.Com</option>
        <option value="B.Sc">B.Sc</option>
        <option value="BBA">BBA</option>
        <option value="BCA">BCA</option>
    </select>
    <input type="radio" name="gender" value="Male">Pursuing
    <input type="radio" name="gender" value="Female">Com<br><br>
    <label for="num">Average CPI:</label>
    <input type="number" id="num">upto
    <input type="number" id="num1">Th Semester
    <br><br>
    <label for="exp">Experience: </label>
    <input type="number" id="exp">years
    <br><br>
    <label for="y">Your Website or Blog</label>
    <input type="text" id="y"><br><br>
    <button type="button" onclick="adduser()">Click</button>
    <table border="1">
        <thead>
            <th>University</th>
            <th>Institute</th>
            <th>Branch</th>
            <th>Degree</th>
            <th>Gender</th>
            <th>Average CPI start</th>
            <th>Average CPI end</th>
            <th>Experience</th>
            <th>Your Website or Blog</th>
            <th>Id</th>
            <th>Edit</th>
            <th>Delete</th>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        var rbtns=document.getElementsByName("gender")
        function adduser() {
            var person = {
                u: "",
                i: "",
                group: "",
                select: "",
                gender: "",
                num: "",
                num1: "",
                exp: "",
                y: "",
            }
            for (a in person) {
                if (a != "gender") {
                    person[a] = document.getElementById(a).value
                } else if (a == "gender") {
                 rbtns.forEach((rb)=>{
                    if(rb.checked){
                        person.gender = rb.value
                    }
                 })
                }
            }
            var postData = new XMLHttpRequest();
            postData.onreadystatechange = function () {
                if (postData.readyState == 4 && postData.status == 201){
                    console.log("Users added succesfully")
                }
            }
                postData.open("POST", " http://localhost:3000/ram");
                postData.setRequestHeader("Content-Type", "application/json");
                postData.send(JSON.stringify(person))
        }
        function getusers() {
            var getinfo = new XMLHttpRequest();
            getinfo.onreadystatechange = function () {
                if (getinfo.readyState == 4 && getinfo.status == 200) {
                    console.log(JSON.parse(getinfo.response))
                    displayUsers(JSON.parse(getinfo.response))
                }
            }
            getinfo.open("GET", " http://localhost:3000/ram")
            getinfo.send()
        }
        getusers()
        function displayUsers(users) {
            users.forEach((usr, i) => {
                var myTr = document.createElement("tr")
                for (a in usr) {
                    var myTd = document.createElement("td")
                    myTd.innerHTML = usr[a]
                    myTr.appendChild(myTd)
                }
                var ediTd = document.createElement("td")
                var delTd = document.createElement("td")

                var editBtn = document.createElement("button")
                editBtn.innerHTML = "Edit"
                editBtn.setAttribute("onclick", "editUser(" + i + ")")
                var deleteBtn = document.createElement("button")
                deleteBtn.innerHTML = "Delete"
                deleteBtn.setAttribute("onclick", "deleteUser(" + i + ")")

                ediTd.appendChild(editBtn)
                delTd.appendChild(deleteBtn)

                myTr.appendChild(ediTd)
                myTr.appendChild(delTd)
                document.querySelector("tbody").appendChild(myTr)
            })
        }
    </script>
</body>

</html>