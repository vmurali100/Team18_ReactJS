<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    form{
background-color: burlywood;
color: black;
height: 150px;
width: 150px;
    }
  </style>
</head>
<body>
  <form>
    <label for="">Customer Name:</label>
    <input type="text" name="" id="customername"><br>
    <label for="">Part Name:</label>
    <input type="text" name="" id="partname"><br>
    <label for="">Part print number:</label>
    <input type="text" name="" id="partprintnumber"><br>
    <label for="">Revision:</label>
    <input type="text" name="" id="Revision"><br>
    <label for="">Date of estimation:</label>
    <input type="date" name="" id="dateofestimation"><br>
    <label for="">Estimator Name:</label>
    <input type="date" name="" id="Estimatorname"><br>
    <button type="button" onclick="Adduser()">submit</button>
  </form>
</body>
<script>
  var user=[];
  function Adduser(){
    var person={
      customername:"",
      partname:"",
      partprintnumber:"",
      Revision:"",
      dateofestimation:"",
      Estimatorname:"",
    }
    for(a in person){
        person[a]=document.getElementById(a).value
    }
    console.log(person)
    var postData=new XMLHttpRequest()
    postData.onreadystatechange=function(){
        if(postData.readyState==4 && postData.status==201){
            console.log("userr added suceesfully")
        }
    }
    postData.open("POST"," http://localhost:3000/person")
    postData.setRequestHeader("Content-Type","application/json")
    postData.send(JSON.stringify(person))

  }
  function getUsers(){
      var getinfo = new XMLHttpRequest()
      getinfo.onreadystatechange=function(){
        if(getinfo.onreadystatechange==4&& getinfo.status==201){
          console.log(JSON.parse(getinfo.response))
                    displayUsers(JSON.parse(getinfo.response)) 
        }
      }
      getinfo.open("GET"," http://localhost:3000/person");
            getinfo.send()
    }
    getUsers()
    function displayUsers(users){
            users.forEach((usr,i)=>{
                var myTr = document.createElement("tr")
                for(a in usr){
                    var myTd = document.createElement("td")
                    myTd.innerHTML = usr[a]
                    myTr.appendChild(myTd)
                }
                var ediTd = document.createElement("td")
                var delTd = document.createElement("td")

                var editBtn = document.createElement("button")
                editBtn.innerHTML = "Edit"
                editBtn.setAttribute("onclick","editUser("+i+")")
                var deleteBtn = document.createElement("button")
                deleteBtn.innerHTML = "Delete"
                 deleteBtn.setAttribute("onclick","deleteUser("+i+")")

                ediTd.appendChild(editBtn)
                delTd.appendChild(deleteBtn)

                myTr.appendChild(ediTd)
                myTr.appendChild(delTd)
                document.querySelector("tbody").appendChild(myTr)
            })
        }
        function editUser(i){
          console.log(person)
        }

</script>
</html>